(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3356],{7653:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3219:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3756:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3231:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]])},7669:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},1197:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},5162:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]])},9560:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},4933:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6412:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/terminal/points/grant",function(){return s(3412)}])},8126:function(e,t,s){"use strict";s.d(t,{E:function(){return i}});var r=s(7066),a=s(255);class n{async get(e,t){return(await this.client.get(e,t)).data}async post(e,t,s){return(await this.client.post(e,t,s)).data}async put(e,t,s){return(await this.client.put(e,t,s)).data}async delete(e,t){return(await this.client.delete(e,t)).data}async grantPoints(e,t,s){return this.post("/api/points/grant/",{uid:e,points:t,reason:s})}async getPointsHistory(e){return this.get("/api/points/history/",{params:e})}async chargePoints(e,t){return this.post("/api/charge/",{amount:e,payment_method:t})}async getChargeHistory(){return this.get("/api/charge/history/")}async getDashboardStats(){return this.get("/api/dashboard/stats/")}async lookupUserByNFC(e){return this.get("/api/nfc/lookup/".concat(e,"/"))}async getGiftCategories(){return this.get("/api/gifts/categories/")}async getGifts(e){return this.get("/api/gifts/",{params:e})}async getGiftDetail(e){return this.get("/api/gifts/".concat(e,"/"))}async exchangeGift(e,t){return this.post("/api/gifts/exchange/",{gift_id:e,...t})}async getGiftExchangeHistory(){return this.get("/api/gifts/exchange/history/")}async getGiftExchangeDetail(e){return this.get("/api/gifts/exchange/".concat(e,"/"))}async request(e,t,s){return(await this.client.request({method:e,url:t,data:s})).data}async requestPasswordReset(e){try{let t=await this.request("POST","/auth/password-reset/",{email:e});return{success:!0,data:t}}catch(e){return{success:!1,error:"パスワードリセット要求に失敗しました"}}}async confirmPasswordReset(e,t){try{let s=await this.request("POST","/auth/password-reset-confirm/",{token:e,password:t});return{success:!0,data:s}}catch(e){return{success:!1,error:"パスワードリセットに失敗しました"}}}async setupTwoFactor(){try{let e=await this.request("POST","/auth/two-factor/setup/");return{success:!0,qr_code_url:e.qr_code_url,backup_codes:e.backup_codes,secret:e.secret}}catch(e){return{success:!1,error:"2FA設定に失敗しました"}}}async verifyTwoFactor(e){try{let t=await this.request("POST","/auth/two-factor/verify/",{token:e});return{success:!0,data:t}}catch(e){return{success:!1,error:"2FA認証に失敗しました"}}}async getTwoFactorStatus(){try{let e=await this.request("GET","/auth/two-factor/status/");return{success:!0,data:e}}catch(e){return{success:!1,error:"2FA状態の取得に失敗しました"}}}async disableTwoFactor(){try{let e=await this.request("POST","/auth/two-factor/disable/");return{success:!0,data:e}}catch(e){return{success:!1,error:"2FA無効化に失敗しました"}}}async generateBackupCodes(){try{let e=await this.request("POST","/auth/two-factor/backup-codes/");return{success:!0,backup_codes:e.backup_codes}}catch(e){return{success:!1,error:"バックアップコード生成に失敗しました"}}}constructor(){this.client=r.Z.create({baseURL:"https://extending-guys-chess-prescribed.trycloudflare.com",timeout:1e4}),this.client.interceptors.request.use(e=>{let t=a.ON.getTokens();return(null==t?void 0:t.access)&&(e.headers.Authorization="Bearer ".concat(t.access)),e},e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t;let s=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!s._retry){s._retry=!0;try{await a.ON.refreshTokens();let e=a.ON.getTokens();if(null==e?void 0:e.access)return s.headers.Authorization="Bearer ".concat(e.access),this.client(s)}catch(e){return a.ON.logout(),Promise.reject(e)}}return Promise.reject(e)})}}let i=new n},3412:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var r=s(5893),a=s(7294),n=s(1664),i=s.n(n),o=s(8126),c=s(3219),l=s(1197),d=s(7669),u=s(3756),p=s(7653),h=s(9560),x=s(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,x.Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var f=s(4933),b=s(3231);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,x.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var k=s(5162),g=()=>{let[e,t]=(0,a.useState)({uid:"",points:"",reason:""}),[s,n]=(0,a.useState)(!1),[x,g]=(0,a.useState)(null),[w,j]=(0,a.useState)(null),v=e=>{t(t=>({...t,[e.target.name]:e.target.value}))},N=async()=>{if(!e.uid.trim()){g({type:"error",text:"UIDを入力してください"});return}n(!0);try{let t=await o.E.lookupUserByNFC(e.uid);if(t.success&&t.user){let e=t.user;j({id:e.id,name:"".concat(e.first_name||""," ").concat(e.last_name||"").trim()||e.username,email:e.email,currentPoints:e.points||0,memberSince:e.date_joined?new Date(e.date_joined).toLocaleDateString("ja-JP"):"Unknown"}),g({type:"success",text:"ユーザーが見つかりました"})}else g({type:"error",text:t.error||"ユーザーが見つかりませんでした"}),j(null)}catch(e){g({type:"error",text:"ユーザーが見つかりませんでした"}),j(null)}finally{n(!1)}},Z=async s=>{if(s.preventDefault(),!e.uid.trim()||!e.points.trim()){g({type:"error",text:"UIDとポイント数を入力してください"});return}let r=parseInt(e.points);if(isNaN(r)||r<=0){g({type:"error",text:"有効なポイント数を入力してください"});return}n(!0);try{let s=await o.E.grantPoints(e.uid,r,e.reason);s.success?(g({type:"success",text:s.message||"".concat(r,"ポイントを付与しました！")}),t({uid:"",points:"",reason:""}),j(null)):g({type:"error",text:s.error||"ポイント付与に失敗しました"})}catch(e){g({type:"error",text:"ポイント付与に失敗しました"})}finally{n(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-peach-50",children:[(0,r.jsx)("header",{className:"bg-white/90 backdrop-blur-sm shadow-soft border-b border-pink-100",children:(0,r.jsx)("div",{className:"max-w-2xl mx-auto px-6 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)(i(),{href:"/store/dashboard",children:(0,r.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-pink-100 to-rose-100 hover:from-pink-200 hover:to-rose-200 rounded-5xl text-pink-700 hover:text-pink-800 transition-all duration-200 shadow-soft hover:shadow-pop",children:[(0,r.jsx)(c.Z,{size:18}),(0,r.jsx)("span",{className:"font-kawaii font-medium",children:"ダッシュボード"})]})}),(0,r.jsx)(i(),{href:"/store/dashboard",children:(0,r.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 bg-gradient-to-r from-rose-100 to-coral-100 hover:from-rose-200 hover:to-coral-200 rounded-5xl text-rose-700 hover:text-rose-800 transition-all duration-200 shadow-soft hover:shadow-pop",children:[(0,r.jsx)(l.Z,{size:18}),(0,r.jsx)("span",{className:"font-kawaii font-medium hidden sm:block",children:"ホーム"})]})})]})})}),(0,r.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-5xl shadow-soft p-6 text-center border border-pink-100",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-400 to-rose-500 rounded-5xl flex items-center justify-center mx-auto mb-4 floating-animation",children:(0,r.jsx)(d.Z,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h1",{className:"text-3xl font-cutie font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent mb-2",children:"ポイント付与"}),(0,r.jsx)("p",{className:"text-pink-600 font-kawaii",children:"お客様にポイントを付与しましょう！"})]}),x&&(0,r.jsxs)("div",{className:"p-4 rounded-5xl flex items-center space-x-3 shadow-soft ".concat("success"===x.type?"bg-gradient-to-r from-mint-50 to-green-50 border border-green-200":"bg-gradient-to-r from-coral-50 to-red-50 border border-red-200"),children:["success"===x.type?(0,r.jsx)(u.Z,{className:"w-5 h-5 text-green-600"}):(0,r.jsx)(p.Z,{className:"w-5 h-5 text-red-600"}),(0,r.jsx)("span",{className:"font-kawaii font-medium ".concat("success"===x.type?"text-green-700":"text-red-700"),children:x.text})]}),(0,r.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-5xl shadow-soft p-6 border border-pink-100",children:[(0,r.jsxs)("h3",{className:"text-xl font-cutie font-bold text-pink-800 mb-4 flex items-center gap-2",children:[(0,r.jsx)(h.Z,{className:"w-5 h-5 text-pink-500"}),"ユーザー検索"]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsxs)("div",{className:"flex-1 relative",children:[(0,r.jsx)(m,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-pink-400",size:20}),(0,r.jsx)("input",{type:"text",name:"uid",value:e.uid,onChange:v,className:"w-full px-4 py-3 pl-12 rounded-5xl border-2 border-pink-200 focus:border-pink-400 focus:ring-4 focus:ring-pink-100 transition-all duration-300 bg-white/95 backdrop-blur-sm placeholder-pink-300 font-kawaii",placeholder:"UID または会員番号を入力"})]}),(0,r.jsx)("button",{type:"button",onClick:N,disabled:s,className:"px-5 py-3 rounded-5xl font-kawaii font-semibold text-white shadow-soft hover:shadow-pop transform hover:scale-105 transition-all duration-300 ease-in-out bg-gradient-to-r from-rose-400 to-coral-500 hover:from-rose-500 hover:to-coral-600 whitespace-nowrap",children:s?"検索中...":"検索"})]})]}),w&&(0,r.jsx)("div",{className:"bg-white/95 backdrop-blur-sm rounded-5xl shadow-soft p-6 border border-pink-100 border-l-4 border-l-pink-400",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-400 to-rose-500 rounded-5xl flex items-center justify-center floating-animation",children:(0,r.jsx)(f.Z,{className:"w-6 h-6 text-white"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"text-lg font-cutie font-bold text-pink-800",children:w.name}),(0,r.jsx)("p",{className:"text-pink-600 font-kawaii",children:w.email}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-2",children:[(0,r.jsxs)("span",{className:"text-sm bg-gradient-to-r from-pink-100 to-rose-100 text-pink-700 px-3 py-1 rounded-5xl font-kawaii font-semibold",children:["現在のポイント: ",w.currentPoints.toLocaleString()," pt"]}),(0,r.jsxs)("span",{className:"text-sm text-pink-500 font-kawaii",children:["会員登録: ",w.memberSince]})]})]})]})}),(0,r.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-5xl shadow-soft p-6 border border-pink-100",children:[(0,r.jsxs)("h3",{className:"text-xl font-cutie font-bold text-pink-800 mb-6 flex items-center gap-2",children:[(0,r.jsx)(b.Z,{className:"w-5 h-5 text-pink-500"}),"ポイント付与フォーム"]}),(0,r.jsxs)("form",{onSubmit:Z,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"points",className:"block text-sm font-kawaii font-semibold text-pink-700 mb-2",children:"付与ポイント数 *"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-pink-400",size:20}),(0,r.jsx)("input",{type:"number",id:"points",name:"points",value:e.points,onChange:v,className:"w-full px-4 py-3 pl-12 rounded-5xl border-2 border-pink-200 focus:border-pink-400 focus:ring-4 focus:ring-pink-100 transition-all duration-300 bg-white/95 backdrop-blur-sm placeholder-pink-300 font-kawaii",placeholder:"例: 500",min:"1",required:!0})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"reason",className:"block text-sm font-kawaii font-semibold text-pink-700 mb-2",children:"付与理由（任意）"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(y,{className:"absolute left-3 top-3 text-pink-400",size:20}),(0,r.jsx)("textarea",{id:"reason",name:"reason",value:e.reason,onChange:v,className:"w-full px-4 py-3 pl-12 rounded-5xl border-2 border-pink-200 focus:border-pink-400 focus:ring-4 focus:ring-pink-100 transition-all duration-300 bg-white/95 backdrop-blur-sm placeholder-pink-300 font-kawaii h-24 resize-none",placeholder:"例: 商品購入特典、イベント参加ボーナスなど"})]})]}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{t({uid:"",points:"",reason:""}),j(null),g(null)},className:"flex-1 px-6 py-3 border-2 border-pink-300 text-pink-700 rounded-5xl font-kawaii font-semibold hover:bg-pink-50 transition-colors duration-200",children:"リセット"}),(0,r.jsx)("button",{type:"submit",disabled:s||!e.uid||!e.points,className:"flex-1 px-5 py-3 rounded-5xl font-kawaii font-semibold text-white shadow-soft hover:shadow-pop transform hover:scale-105 transition-all duration-300 ease-in-out bg-gradient-to-r from-pink-400 to-rose-500 hover:from-pink-500 hover:to-rose-600 disabled:opacity-50 disabled:cursor-not-allowed",children:s?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,r.jsx)("span",{children:"付与中..."})]}):"ポイント付与"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-5xl shadow-soft p-6 border border-pink-100",children:[(0,r.jsxs)("h3",{className:"text-xl font-cutie font-bold text-pink-800 mb-4 flex items-center gap-2",children:[(0,r.jsx)(k.Z,{className:"w-5 h-5 text-pink-500"}),"クイックアクション"]}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[100,300,500,1e3].map(e=>(0,r.jsx)("button",{onClick:()=>t(t=>({...t,points:e.toString()})),className:"p-3 bg-gradient-to-r from-peach-100 to-coral-100 hover:from-peach-200 hover:to-coral-200 rounded-5xl text-center transition-all duration-200 hover:scale-105 shadow-soft",children:(0,r.jsxs)("span",{className:"font-kawaii font-bold text-coral-700",children:[e," pt"]})},e))})]})]})]})}}},function(e){e.O(0,[7066,4862,255,9774,2888,179],function(){return e(e.s=6412)}),_N_E=e.O()}]);