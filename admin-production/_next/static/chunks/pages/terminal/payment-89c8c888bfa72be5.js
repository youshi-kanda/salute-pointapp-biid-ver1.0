(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9119],{4297:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var r=s(7294),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:c=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:d,...m},u)=>(0,r.createElement)("svg",{ref:u,...a,width:c,height:c,stroke:s,strokeWidth:o?24*Number(i)/Number(c):i,className:["lucide",`lucide-${n(e)}`,l].join(" "),...m},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return s.displayName=`${e}`,s}},6583:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]])},3742:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},4998:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},6942:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},1934:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Nfc",[["path",{d:"M6 8.32a7.43 7.43 0 0 1 0 7.36",key:"9iaqei"}],["path",{d:"M9.46 6.21a11.76 11.76 0 0 1 0 11.58",key:"1yha7l"}],["path",{d:"M12.91 4.1a15.91 15.91 0 0 1 .01 15.8",key:"4iu2gk"}],["path",{d:"M16.37 2a20.16 20.16 0 0 1 0 20",key:"sap9u2"}]])},2297:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},9560:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},5637:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(4297).Z)("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]])},4642:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/terminal/payment",function(){return s(6384)}])},6384:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return X}});var r=s(5893),a=s(7294),n=s(1163),c=s(255),i=s(8126),o=s(3454);class l{async processCardPayment(e,t){try{let s=await fetch("".concat(this.config.apiUrl,"/payment/card"),{method:"POST",headers:{"Content-Type":"application/json","X-Site-ID":this.config.siteId,"X-Site-Pass":this.config.sitePass,"X-Shop-ID":this.config.shopId,"X-Shop-Pass":this.config.shopPass},body:JSON.stringify({...e,cardInfo:{...t,cardNumber:this.encryptCardNumber(t.cardNumber)}})}),r=await s.json();if(s.ok)return{success:!0,orderId:r.orderId,transactionId:r.transactionId,status:r.status,paymentUrl:r.paymentUrl};return{success:!1,error:r.error||"カード決済に失敗しました",errorCode:r.errorCode}}catch(e){return console.error("GMO Card Payment Error:",e),{success:!1,error:"カード決済処理中にエラーが発生しました"}}}async processConveniencePayment(e,t){try{let s=await fetch("".concat(this.config.apiUrl,"/payment/convenience"),{method:"POST",headers:{"Content-Type":"application/json","X-Site-ID":this.config.siteId,"X-Site-Pass":this.config.sitePass,"X-Shop-ID":this.config.shopId,"X-Shop-Pass":this.config.shopPass},body:JSON.stringify({...e,convenienceInfo:t})}),r=await s.json();if(s.ok)return{success:!0,orderId:r.orderId,transactionId:r.transactionId,status:"pending",paymentUrl:r.paymentUrl};return{success:!1,error:r.error||"コンビニ決済に失敗しました",errorCode:r.errorCode}}catch(e){return console.error("GMO Convenience Payment Error:",e),{success:!1,error:"コンビニ決済処理中にエラーが発生しました"}}}async processBankTransfer(e,t){try{let s=await fetch("".concat(this.config.apiUrl,"/payment/bank"),{method:"POST",headers:{"Content-Type":"application/json","X-Site-ID":this.config.siteId,"X-Site-Pass":this.config.sitePass,"X-Shop-ID":this.config.shopId,"X-Shop-Pass":this.config.shopPass},body:JSON.stringify({...e,bankInfo:t})}),r=await s.json();if(s.ok)return{success:!0,orderId:r.orderId,transactionId:r.transactionId,status:"pending"};return{success:!1,error:r.error||"銀行振込決済に失敗しました",errorCode:r.errorCode}}catch(e){return console.error("GMO Bank Transfer Error:",e),{success:!1,error:"銀行振込決済処理中にエラーが発生しました"}}}async checkPaymentStatus(e){try{let t=await fetch("".concat(this.config.apiUrl,"/payment/status/").concat(e),{method:"GET",headers:{"X-Site-ID":this.config.siteId,"X-Site-Pass":this.config.sitePass,"X-Shop-ID":this.config.shopId,"X-Shop-Pass":this.config.shopPass}}),s=await t.json();if(t.ok)return{success:!0,orderId:s.orderId,transactionId:s.transactionId,status:s.status};return{success:!1,error:s.error||"決済状態の確認に失敗しました",errorCode:s.errorCode}}catch(e){return console.error("GMO Payment Status Error:",e),{success:!1,error:"決済状態確認中にエラーが発生しました"}}}async cancelPayment(e){try{let t=await fetch("".concat(this.config.apiUrl,"/payment/cancel/").concat(e),{method:"POST",headers:{"X-Site-ID":this.config.siteId,"X-Site-Pass":this.config.sitePass,"X-Shop-ID":this.config.shopId,"X-Shop-Pass":this.config.shopPass}}),s=await t.json();if(t.ok)return{success:!0,orderId:s.orderId,status:"cancelled"};return{success:!1,error:s.error||"決済キャンセルに失敗しました",errorCode:s.errorCode}}catch(e){return console.error("GMO Payment Cancel Error:",e),{success:!1,error:"決済キャンセル処理中にエラーが発生しました"}}}async refundPayment(e,t){try{let s=await fetch("".concat(this.config.apiUrl,"/payment/refund/").concat(e),{method:"POST",headers:{"Content-Type":"application/json","X-Site-ID":this.config.siteId,"X-Site-Pass":this.config.sitePass,"X-Shop-ID":this.config.shopId,"X-Shop-Pass":this.config.shopPass},body:JSON.stringify({amount:t||void 0})}),r=await s.json();if(s.ok)return{success:!0,orderId:r.orderId,transactionId:r.transactionId,status:r.status};return{success:!1,error:r.error||"返金処理に失敗しました",errorCode:r.errorCode}}catch(e){return console.error("GMO Payment Refund Error:",e),{success:!1,error:"返金処理中にエラーが発生しました"}}}encryptCardNumber(e){return btoa(e)}verifyWebhookSignature(e,t){return t===this.generateWebhookSignature(e)}generateWebhookSignature(e){return btoa(e+this.config.shopPass)}constructor(e){this.config=e}}let d=()=>new l({siteId:o.env.GMO_SITE_ID||"",sitePass:o.env.GMO_SITE_PASS||"",shopId:o.env.GMO_SHOP_ID||"",shopPass:o.env.GMO_SHOP_PASS||"",apiUrl:o.env.GMO_API_URL||"https://api.gmo-pg.com",environment:"production"});var m=s(3454);class u{async createPaymentIntent(e){try{var t,s;let r=await fetch("https://api.stripe.com/v1/payment_intents",{method:"POST",headers:{Authorization:"Bearer ".concat(this.config.secretKey),"Content-Type":"application/x-www-form-urlencoded"},body:this.buildFormData({amount:e.amount.toString(),currency:e.currency,customer:e.customerId,receipt_email:e.customerEmail,description:e.description,metadata:e.metadata,automatic_payment_methods:{enabled:!0}})}),a=await r.json();if(r.ok)return{success:!0,paymentIntentId:a.id,clientSecret:a.client_secret,status:a.status};return{success:!1,error:(null===(t=a.error)||void 0===t?void 0:t.message)||"支払いインテントの作成に失敗しました",errorCode:null===(s=a.error)||void 0===s?void 0:s.code}}catch(e){return console.error("Stripe Payment Intent Error:",e),{success:!1,error:"支払いインテント作成中にエラーが発生しました"}}}async confirmPaymentIntent(e,t){try{var s,r;let a=await fetch("https://api.stripe.com/v1/payment_intents/".concat(e,"/confirm"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.config.secretKey),"Content-Type":"application/x-www-form-urlencoded"},body:this.buildFormData({payment_method:t})}),n=await a.json();if(a.ok)return{success:!0,paymentIntentId:n.id,status:n.status};return{success:!1,error:(null===(s=n.error)||void 0===s?void 0:s.message)||"支払い確認に失敗しました",errorCode:null===(r=n.error)||void 0===r?void 0:r.code}}catch(e){return console.error("Stripe Payment Confirm Error:",e),{success:!1,error:"支払い確認中にエラーが発生しました"}}}async cancelPaymentIntent(e){try{var t,s;let r=await fetch("https://api.stripe.com/v1/payment_intents/".concat(e,"/cancel"),{method:"POST",headers:{Authorization:"Bearer ".concat(this.config.secretKey),"Content-Type":"application/x-www-form-urlencoded"}}),a=await r.json();if(r.ok)return{success:!0,paymentIntentId:a.id,status:a.status};return{success:!1,error:(null===(t=a.error)||void 0===t?void 0:t.message)||"支払いキャンセルに失敗しました",errorCode:null===(s=a.error)||void 0===s?void 0:s.code}}catch(e){return console.error("Stripe Payment Cancel Error:",e),{success:!1,error:"支払いキャンセル中にエラーが発生しました"}}}async createCustomer(e,t,s){try{var r;let a=await fetch("https://api.stripe.com/v1/customers",{method:"POST",headers:{Authorization:"Bearer ".concat(this.config.secretKey),"Content-Type":"application/x-www-form-urlencoded"},body:this.buildFormData({email:e,name:t,metadata:s})}),n=await a.json();if(a.ok)return{success:!0,customer:{id:n.id,email:n.email,name:n.name,phone:n.phone,metadata:n.metadata}};return{success:!1,error:(null===(r=n.error)||void 0===r?void 0:r.message)||"顧客作成に失敗しました"}}catch(e){return console.error("Stripe Customer Create Error:",e),{success:!1,error:"顧客作成中にエラーが発生しました"}}}async getCustomer(e){try{var t;let s=await fetch("https://api.stripe.com/v1/customers/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(this.config.secretKey)}}),r=await s.json();if(s.ok)return{success:!0,customer:{id:r.id,email:r.email,name:r.name,phone:r.phone,metadata:r.metadata}};return{success:!1,error:(null===(t=r.error)||void 0===t?void 0:t.message)||"顧客取得に失敗しました"}}catch(e){return console.error("Stripe Customer Get Error:",e),{success:!1,error:"顧客取得中にエラーが発生しました"}}}async createRefund(e,t){try{var s;let r=await fetch("https://api.stripe.com/v1/refunds",{method:"POST",headers:{Authorization:"Bearer ".concat(this.config.secretKey),"Content-Type":"application/x-www-form-urlencoded"},body:this.buildFormData({payment_intent:e,amount:null==t?void 0:t.toString()})}),a=await r.json();if(r.ok)return{success:!0,refundId:a.id};return{success:!1,error:(null===(s=a.error)||void 0===s?void 0:s.message)||"返金処理に失敗しました"}}catch(e){return console.error("Stripe Refund Error:",e),{success:!1,error:"返金処理中にエラーが発生しました"}}}async getPaymentHistory(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;try{var s;let r=new URLSearchParams({limit:t.toString()});e&&r.append("customer",e);let a=await fetch("https://api.stripe.com/v1/payment_intents?".concat(r),{method:"GET",headers:{Authorization:"Bearer ".concat(this.config.secretKey)}}),n=await a.json();if(a.ok)return{success:!0,payments:n.data};return{success:!1,error:(null===(s=n.error)||void 0===s?void 0:s.message)||"支払い履歴取得に失敗しました"}}catch(e){return console.error("Stripe Payment History Error:",e),{success:!1,error:"支払い履歴取得中にエラーが発生しました"}}}verifyWebhookSignature(e,t){try{let s=this.generateWebhookSignature(e);return t===s}catch(e){return console.error("Webhook signature verification failed:",e),!1}}generateWebhookSignature(e){return btoa(e+this.config.webhookSecret)}buildFormData(e){let t=new URLSearchParams;return Object.entries(e).forEach(e=>{let[s,r]=e;null!=r&&("object"==typeof r?"metadata"===s?Object.entries(r).forEach(e=>{let[s,r]=e;t.append("metadata[".concat(s,"]"),r)}):Object.entries(r).forEach(e=>{let[r,a]=e;t.append("".concat(s,"[").concat(r,"]"),a)}):t.append(s,r.toString()))}),t.toString()}constructor(e){this.config=e}}let x=()=>new u({publishableKey:m.env.STRIPE_PUBLISHABLE_KEY||"",secretKey:m.env.STRIPE_SECRET_KEY||"",webhookSecret:m.env.STRIPE_WEBHOOK_SECRET||"",environment:"live"});var h=s(3454);class p{async processPayment(e){try{if("gmo"===e.provider)return await this.processGMOPayment(e);if("stripe"===e.provider)return await this.processStripePayment(e);return{success:!1,provider:e.provider,error:"サポートされていない決済プロバイダーです"}}catch(t){return console.error("Payment processing error:",t),{success:!1,provider:e.provider,error:"決済処理中にエラーが発生しました"}}}async processGMOPayment(e){let t={orderId:this.generateOrderId(),amount:e.amount,currency:e.currency,customerId:e.customerId||"guest",customerName:e.customerName||"Guest User",customerEmail:e.customerEmail||"",returnUrl:e.returnUrl||"",cancelUrl:e.cancelUrl||"",description:e.description},s={cardNumber:"4111111111111111",expiryMonth:"12",expiryYear:"2025",cvv:"123",holderName:e.customerName||"Test User"},r=await this.gmoService.processCardPayment(t,s);return{success:r.success,provider:"gmo",transactionId:r.transactionId,paymentUrl:r.paymentUrl,status:r.status,error:r.error,errorCode:r.errorCode}}async processStripePayment(e){let t={amount:e.amount,currency:e.currency,customerId:e.customerId,customerEmail:e.customerEmail,customerName:e.customerName,description:e.description,metadata:e.metadata},s=await this.stripeService.createPaymentIntent(t);return{success:s.success,provider:"stripe",transactionId:s.paymentIntentId,clientSecret:s.clientSecret,status:s.status,error:s.error,errorCode:s.errorCode}}async checkPaymentStatus(e,t){try{if("gmo"===e){let e=await this.gmoService.checkPaymentStatus(t);return{success:e.success,provider:"gmo",transactionId:e.transactionId,status:e.status,error:e.error,errorCode:e.errorCode}}if("stripe"===e)return{success:!0,provider:"stripe",transactionId:t,status:"succeeded"};return{success:!1,provider:e,error:"サポートされていない決済プロバイダーです"}}catch(t){return console.error("Payment status check error:",t),{success:!1,provider:e,error:"決済状態確認中にエラーが発生しました"}}}async cancelPayment(e,t){try{if("gmo"===e){let e=await this.gmoService.cancelPayment(t);return{success:e.success,provider:"gmo",transactionId:e.orderId,status:e.status,error:e.error,errorCode:e.errorCode}}if("stripe"!==e)return{success:!1,provider:e,error:"サポートされていない決済プロバイダーです"};{let e=await this.stripeService.cancelPaymentIntent(t);return{success:e.success,provider:"stripe",transactionId:e.paymentIntentId,status:e.status,error:e.error,errorCode:e.errorCode}}}catch(t){return console.error("Payment cancellation error:",t),{success:!1,provider:e,error:"決済キャンセル中にエラーが発生しました"}}}async refundPayment(e,t,s){try{if("gmo"===e){let e=await this.gmoService.refundPayment(t,s);return{success:e.success,provider:"gmo",transactionId:e.transactionId,status:e.status,error:e.error,errorCode:e.errorCode}}if("stripe"!==e)return{success:!1,provider:e,error:"サポートされていない決済プロバイダーです"};{let e=await this.stripeService.createRefund(t,s);return{success:e.success,provider:"stripe",transactionId:e.refundId,status:"succeeded",error:e.error}}}catch(t){return console.error("Payment refund error:",t),{success:!1,provider:e,error:"返金処理中にエラーが発生しました"}}}async getPaymentHistory(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;try{let r=[];if(!e||"gmo"===e){let e=[{id:"gmo_payment_1",provider:"gmo",amount:5e3,currency:"JPY",status:"completed",customerId:t,customerEmail:"user@example.com",description:"ポイント購入",createdAt:new Date("2025-01-10"),metadata:{type:"point_purchase"}}];r.push(...e)}if(!e||"stripe"===e){let e=await this.stripeService.getPaymentHistory(t,s);if(e.success&&e.payments){let t=e.payments.map(e=>({id:e.id,provider:"stripe",amount:e.amount,currency:e.currency,status:e.status,customerId:e.customer,customerEmail:e.receipt_email,description:e.description,createdAt:new Date(1e3*e.created),metadata:e.metadata}));r.push(...t)}}return r.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()),{success:!0,payments:r.slice(0,s)}}catch(e){return console.error("Payment history error:",e),{success:!1,error:"決済履歴取得中にエラーが発生しました"}}}verifyWebhookSignature(e,t,s){try{if("gmo"===e)return this.gmoService.verifyWebhookSignature(t,s);if("stripe"===e)return this.stripeService.verifyWebhookSignature(t,s);return!1}catch(e){return console.error("Webhook signature verification error:",e),!1}}getAvailableProviders(){return["gmo","stripe"]}checkProviderConfiguration(e){return"gmo"===e?!!(h.env.GMO_SITE_ID&&h.env.GMO_SITE_PASS):"stripe"===e&&!!(h.env.STRIPE_PUBLISHABLE_KEY&&h.env.STRIPE_SECRET_KEY)}generateOrderId(){let e=Date.now().toString(36),t=Math.random().toString(36).substr(2,9);return"order_".concat(e,"_").concat(t)}constructor(){this.gmoService=d(),this.stripeService=x()}}let g=new p;var y=s(666),b=s(8621),f=s(1962),j=s(6383),N=s(1934),v=s(6942),w=s(6583),S=s(9560),I=s(4933),k=s(3546),C=s(5637),P=s(1408),E=s(1197),_=s(3742),T=s(4998),A=s(2297),Z=s(4297);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let O=(0,Z.Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);var M=s(1352);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let D=(0,Z.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var X=()=>{let e=(0,n.useRouter)(),[t,s]=(0,a.useState)("idle"),[o,l]=(0,a.useState)(""),[d,m]=(0,a.useState)(null),[u,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(null),[Z,X]=(0,a.useState)(!0),[R,U]=(0,a.useState)(!1),[L,G]=(0,a.useState)(!1),[B,W]=(0,a.useState)([]),[K,H]=(0,a.useState)({totalAmount:0,totalTransactions:0,averageAmount:0,pointsIssued:0}),[z,q]=(0,a.useState)({cashless:{enabled:!0},creditCard:{enabled:!0},cash:{enabled:!0},points:{enabled:!0},limits:{minAmount:1,maxAmount:1e5},timeout:30}),F=[{id:"credit_card",name:"クレジットカード",icon:b.Z,type:"card",enabled:z.creditCard.enabled,fee:3.24,description:"Visa、MasterCard、JCB対応"},{id:"mobile_pay",name:"モバイル決済",icon:f.Z,type:"mobile",enabled:z.cashless.enabled,fee:2.45,description:"Apple Pay、Google Pay、PayPay"},{id:"qr_code",name:"QRコード決済",icon:j.Z,type:"qr",enabled:z.cashless.enabled,fee:2.95,description:"QRコードスキャンで決済"},{id:"nfc_pay",name:"NFC決済",icon:N.Z,type:"nfc",enabled:z.cashless.enabled,fee:1.95,description:"タッチ決済"},{id:"cash",name:"現金",icon:v.Z,type:"cash",enabled:z.cash.enabled,fee:0,description:"現金決済"}];(0,a.useEffect)(()=>{if(!c.ON.isAuthenticated()){e.push("/login");return}Q(),$(),V(),J()},[e]);let J=async()=>{try{let e=localStorage.getItem("paymentSettings");e&&q(JSON.parse(e))}catch(e){console.error("決済設定の読み込みに失敗:",e)}},Y=async e=>{try{localStorage.setItem("paymentSettings",JSON.stringify(e)),q(e)}catch(e){console.error("決済設定の保存に失敗:",e)}},Q=()=>{W([{id:"TXN-001",amount:1500,paymentMethod:"クレジットカード",customerName:"田中 由紀",timestamp:"2024-01-14T10:30:00Z",status:"completed",pointsEarned:150,receiptNumber:"R-20240114-001"},{id:"TXN-002",amount:2800,paymentMethod:"QRコード決済",customerName:"佐藤 聡",timestamp:"2024-01-14T10:15:00Z",status:"completed",pointsEarned:280,receiptNumber:"R-20240114-002"},{id:"TXN-003",amount:850,paymentMethod:"NFC決済",customerName:"鈴木 美香",timestamp:"2024-01-14T09:45:00Z",status:"completed",pointsEarned:85,receiptNumber:"R-20240114-003"}])},$=()=>{H({totalAmount:47850,totalTransactions:23,averageAmount:2080,pointsIssued:4785})},V=()=>{{X(navigator.onLine);let e=setInterval(()=>{X(navigator.onLine)},5e3);return()=>clearInterval(e)}},ee=e=>{if(""===e||/^\d+$/.test(e)){let t=parseInt(e)||0;""!==e&&(t<z.limits.minAmount||t>z.limits.maxAmount)||l(e)}},et=e=>{m(e),s("customer")},es=e=>{x({id:1,name:"田中 由紀",memberId:"M001234",points:2450,level:3,avatar:"\uD83D\uDC69‍\uD83D\uDCBC",email:"yuki.tanaka@example.com",phone:"090-1234-5678",lastVisit:"2024-01-10",totalSpent:125e3,favoriteItems:["コーヒー","サンドイッチ","サラダ"],loyaltyStatus:"gold"}),U(!1),G(!1)},er=async()=>{if(d&&o){s("processing");try{var e;let t={provider:"card"===d.type?"stripe":"gmo",amount:parseInt(o),currency:"JPY",customerId:null==u?void 0:null===(e=u.id)||void 0===e?void 0:e.toString(),customerEmail:(null==u?void 0:u.email)||"guest@example.com",customerName:(null==u?void 0:u.name)||"ゲスト",description:"店舗決済 - ".concat(d.name),metadata:{paymentMethod:d.name,terminalId:"terminal_001",storeId:"store_001"}},r=await g.processPayment(t);if(r.success){let e={id:r.transactionId||"TXN-".concat(Date.now()),amount:parseInt(o),paymentMethod:d.name,customerName:(null==u?void 0:u.name)||"ゲスト",timestamp:new Date().toISOString(),status:"completed",pointsEarned:Math.floor(.1*parseInt(o)),receiptNumber:"R-".concat(new Date().toISOString().split("T")[0].replace(/-/g,""),"-").concat(String(B.length+1).padStart(3,"0"))};if(p(e),W(t=>[e,...t]),s("completed"),H(t=>({totalAmount:t.totalAmount+parseInt(o),totalTransactions:t.totalTransactions+1,averageAmount:Math.round((t.totalAmount+parseInt(o))/(t.totalTransactions+1)),pointsIssued:t.pointsIssued+e.pointsEarned})),null==u?void 0:u.memberId)try{await i.E.grantPoints(u.memberId,e.pointsEarned,"決済ポイント")}catch(e){console.error("ポイント付与エラー:",e)}}else console.error("決済エラー:",r.error),s("failed")}catch(e){console.error("決済処理エラー:",e),s("failed")}}},ea=()=>{s("idle"),l(""),m(null),x(null),p(null),U(!1),G(!1)},en=e=>"\xa5".concat(e.toLocaleString()),ec=e=>new Date(e).toLocaleString("ja-JP");return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(b.Z,{className:"h-8 w-8 text-blue-600"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"決済端末"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full text-sm font-medium ".concat(Z?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:[Z?(0,r.jsx)(k.Z,{className:"h-4 w-4"}):(0,r.jsx)(C.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:Z?"オンライン":"オフライン"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"本日の売上"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900",children:en(K.totalAmount)})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"取引数"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900",children:K.totalTransactions})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("button",{onClick:()=>s("settings"),className:"flex items-center space-x-2 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,r.jsx)(P.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"設定"})]}),(0,r.jsxs)("button",{onClick:()=>e.push("/terminal"),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[(0,r.jsx)(E.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"メニュー"})]})]})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:[{key:"amount",label:"金額入力"},{key:"method",label:"決済方法"},{key:"customer",label:"顧客情報"},{key:"processing",label:"処理中"},{key:"completed",label:"完了"}].map((e,s)=>{let{key:a,label:n}=e;return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ".concat(t===a?"bg-blue-600 text-white":["amount","method","customer","processing","completed"].indexOf(t)>s?"bg-green-600 text-white":"bg-gray-200 text-gray-600"),children:["amount","method","customer","processing","completed"].indexOf(t)>s?(0,r.jsx)(_.Z,{className:"h-4 w-4"}):s+1}),(0,r.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:n}),s<4&&(0,r.jsx)(T.Z,{className:"h-4 w-4 text-gray-400 mx-2"})]},a)})}),"idle"!==t&&(0,r.jsxs)("button",{onClick:ea,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,r.jsx)(A.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"リセット"})]})]}),"idle"===t&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)(b.Z,{className:"h-24 w-24 text-blue-600 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済を開始"}),(0,r.jsx)("p",{className:"text-gray-600",children:"金額を入力して決済を開始してください"})]}),(0,r.jsx)("button",{onClick:()=>s("amount"),className:"px-8 py-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-lg font-medium",children:"決済開始"})]}),"amount"===t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"金額を入力"}),(0,r.jsx)("p",{className:"text-gray-600",children:"決済金額を入力してください"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["制限: \xa5",z.limits.minAmount.toLocaleString()," 〜 \xa5",z.limits.maxAmount.toLocaleString()]})]}),(0,r.jsx)("div",{className:"max-w-md mx-auto",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-2xl text-gray-500",children:"\xa5"}),(0,r.jsx)("input",{type:"text",value:o,onChange:e=>ee(e.target.value),placeholder:"0",className:"w-full pl-8 pr-4 py-4 text-3xl font-bold text-center border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:[100,500,1e3,2e3,5e3,1e4].map(e=>(0,r.jsxs)("button",{onClick:()=>l(e.toString()),className:"px-4 py-3 bg-gray-100 text-gray-900 rounded-lg hover:bg-gray-200 font-medium",children:["\xa5",e.toLocaleString()]},e))}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>s("idle"),className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,r.jsx)("button",{onClick:()=>s("method"),disabled:!o||0>=parseInt(o)||parseInt(o)<z.limits.minAmount||parseInt(o)>z.limits.maxAmount,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"次へ"})]})]}),"method"===t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済方法を選択"}),(0,r.jsx)("p",{className:"text-gray-600",children:"支払い方法を選んでください"}),(0,r.jsx)("div",{className:"mt-4 text-3xl font-bold text-blue-600",children:en(parseInt(o))})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:F.map(e=>{let t=e.icon;return(0,r.jsx)("button",{onClick:()=>et(e),disabled:!e.enabled,className:"p-6 border-2 rounded-lg text-left transition-colors ".concat(e.enabled?"border-gray-200 hover:border-blue-500 hover:bg-blue-50":"border-gray-100 bg-gray-50 cursor-not-allowed"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"p-3 rounded-full ".concat(e.enabled?"bg-blue-100":"bg-gray-100"),children:(0,r.jsx)(t,{className:"h-6 w-6 ".concat(e.enabled?"text-blue-600":"text-gray-400")})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold ".concat(e.enabled?"text-gray-900":"text-gray-400"),children:e.name}),(0,r.jsx)("p",{className:"text-sm ".concat(e.enabled?"text-gray-600":"text-gray-400"),children:e.description}),e.fee>0&&(0,r.jsxs)("p",{className:"text-sm text-orange-600 mt-1",children:["手数料: ",e.fee,"%"]})]})]})},e.id)})}),(0,r.jsx)("div",{className:"flex justify-center space-x-4",children:(0,r.jsx)("button",{onClick:()=>s("amount"),className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"戻る"})})]}),"customer"===t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"顧客情報"}),(0,r.jsx)("p",{className:"text-gray-600",children:"会員カードをスキャンしてください（任意）"})]}),u?(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-gray-50 rounded-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center text-2xl",children:u.avatar}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:u.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:u.memberId}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{switch(e){case"bronze":return"bg-orange-100 text-orange-800";case"silver":default:return"bg-gray-100 text-gray-800";case"gold":return"bg-yellow-100 text-yellow-800";case"platinum":return"bg-purple-100 text-purple-800"}})(u.loyaltyStatus)),children:[(e=>{switch(e){case"bronze":case"gold":case"platinum":return(0,r.jsx)(w.Z,{className:"h-4 w-4"});case"silver":return(0,r.jsx)(S.Z,{className:"h-4 w-4"});default:return(0,r.jsx)(I.Z,{className:"h-4 w-4"})}})(u.loyaltyStatus),(0,r.jsx)("span",{className:"ml-1",children:u.loyaltyStatus.toUpperCase()})]}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Lv.",u.level]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"保有ポイント"}),(0,r.jsxs)("p",{className:"font-semibold text-gray-900",children:[u.points.toLocaleString(),"pt"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-600",children:"獲得予定"}),(0,r.jsxs)("p",{className:"font-semibold text-green-600",children:["+",Math.floor(.1*parseInt(o)),"pt"]})]})]})]}):(0,r.jsx)("div",{className:"max-w-md mx-auto",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("button",{onClick:()=>U(!0),className:"p-6 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50",children:[(0,r.jsx)(j.Z,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"QRコード"})]}),(0,r.jsxs)("button",{onClick:()=>G(!0),className:"p-6 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50",children:[(0,r.jsx)(N.Z,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"NFCタッチ"})]})]})}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>s("method"),className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"戻る"}),(0,r.jsx)("button",{onClick:er,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"決済実行"})]})]}),"processing"===t&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済処理中"}),(0,r.jsx)("p",{className:"text-gray-600",children:"しばらくお待ちください..."})]}),(0,r.jsx)("div",{className:"text-xl font-bold text-blue-600",children:en(parseInt(o))}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:[null==d?void 0:d.name,"で決済中"]})]}),"completed"===t&&h&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(_.Z,{className:"h-8 w-8 text-green-600"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済完了"}),(0,r.jsx)("p",{className:"text-gray-600",children:"ありがとうございました"})]}),(0,r.jsx)("div",{className:"max-w-md mx-auto bg-gray-50 rounded-lg p-6 mb-6",children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"金額"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:en(h.amount)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"決済方法"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:h.paymentMethod})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"獲得ポイント"}),(0,r.jsxs)("span",{className:"font-semibold text-green-600",children:["+",h.pointsEarned,"pt"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"レシート番号"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:h.receiptNumber})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"日時"}),(0,r.jsx)("span",{className:"font-semibold text-gray-900",children:ec(h.timestamp)})]})]})}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>{h&&alert("レシート印刷: ".concat(h.receiptNumber))},className:"flex items-center space-x-2 px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[(0,r.jsx)(O,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"レシート印刷"})]}),(0,r.jsx)("button",{onClick:ea,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"新しい決済"})]})]}),"failed"===t&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(M.Z,{className:"h-8 w-8 text-red-600"})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済エラー"}),(0,r.jsx)("p",{className:"text-gray-600",children:"決済に失敗しました"})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>s("method"),className:"px-6 py-3 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"戻る"}),(0,r.jsx)("button",{onClick:ea,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"最初から"})]})]}),"settings"===t&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"決済設定"}),(0,r.jsxs)("button",{onClick:()=>s("idle"),className:"flex items-center space-x-2 px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,r.jsx)(D,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"戻る"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"決済方法"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(b.Z,{className:"h-5 w-5 text-gray-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"クレジットカード"})]}),(0,r.jsx)("button",{onClick:()=>{Y({...z,creditCard:{enabled:!z.creditCard.enabled}})},className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(z.creditCard.enabled?"bg-blue-600":"bg-gray-200"),children:(0,r.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(z.creditCard.enabled?"translate-x-5":"translate-x-0")})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(f.Z,{className:"h-5 w-5 text-gray-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"キャッシュレス決済"})]}),(0,r.jsx)("button",{onClick:()=>{Y({...z,cashless:{enabled:!z.cashless.enabled}})},className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(z.cashless.enabled?"bg-blue-600":"bg-gray-200"),children:(0,r.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(z.cashless.enabled?"translate-x-5":"translate-x-0")})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5 text-gray-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"現金決済"})]}),(0,r.jsx)("button",{onClick:()=>{Y({...z,cash:{enabled:!z.cash.enabled}})},className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(z.cash.enabled?"bg-blue-600":"bg-gray-200"),children:(0,r.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(z.cash.enabled?"translate-x-5":"translate-x-0")})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(S.Z,{className:"h-5 w-5 text-gray-600"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"ポイント決済"})]}),(0,r.jsx)("button",{onClick:()=>{Y({...z,points:{enabled:!z.points.enabled}})},className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(z.points.enabled?"bg-blue-600":"bg-gray-200"),children:(0,r.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(z.points.enabled?"translate-x-5":"translate-x-0")})})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"金額制限"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最小金額"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"\xa5"}),(0,r.jsx)("input",{type:"number",value:z.limits.minAmount,onChange:e=>{Y({...z,limits:{...z.limits,minAmount:parseInt(e.target.value)||1}})},className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"最大金額"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"\xa5"}),(0,r.jsx)("input",{type:"number",value:z.limits.maxAmount,onChange:e=>{Y({...z,limits:{...z.limits,maxAmount:parseInt(e.target.value)||1e5}})},className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"タイムアウト設定"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"決済タイムアウト（秒）"}),(0,r.jsx)("input",{type:"number",value:z.timeout,onChange:e=>{Y({...z,timeout:parseInt(e.target.value)||30})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"10",max:"300"}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"10〜300秒の範囲で設定してください"})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"設定情報"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("p",{className:"text-blue-800",children:[(0,r.jsx)("span",{className:"font-medium",children:"有効な決済方法:"})," ",F.filter(e=>e.enabled).length,"/",F.length]}),(0,r.jsxs)("p",{className:"text-blue-800",children:[(0,r.jsx)("span",{className:"font-medium",children:"金額制限:"})," \xa5",z.limits.minAmount.toLocaleString()," 〜 \xa5",z.limits.maxAmount.toLocaleString()]}),(0,r.jsxs)("p",{className:"text-blue-800",children:[(0,r.jsx)("span",{className:"font-medium",children:"タイムアウト:"})," ",z.timeout,"秒"]})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"設定は自動保存されます。店舗管理画面の設定と同期されます。"}),(0,r.jsx)("button",{onClick:()=>s("idle"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"完了"})]})]})]})})}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"本日の統計"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"総売上"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:en(K.totalAmount)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"取引数"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:K.totalTransactions})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"平均単価"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:en(K.averageAmount)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"発行ポイント"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[K.pointsIssued,"pt"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"最近の取引"}),(0,r.jsx)("div",{className:"space-y-3",children:B.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:en(e.amount)}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.paymentMethod})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:ec(e.timestamp)}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"failed"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"completed"===e.status?"完了":"failed"===e.status?"失敗":"処理中"})]})]},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"本日の統計"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"総売上"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:en(K.totalAmount)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"取引数"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:K.totalTransactions})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"平均単価"}),(0,r.jsx)("span",{className:"text-lg font-bold text-gray-900",children:en(K.averageAmount)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"発行ポイント"}),(0,r.jsxs)("span",{className:"text-lg font-bold text-green-600",children:[K.pointsIssued,"pt"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"最近の取引"}),(0,r.jsx)("div",{className:"space-y-3",children:B.slice(0,5).map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900",children:en(e.amount)}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.paymentMethod})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:ec(e.timestamp)}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat("completed"===e.status?"bg-green-100 text-green-800":"failed"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"completed"===e.status?"完了":"failed"===e.status?"失敗":"処理中"})]})]},e.id))})]})]})]}),R&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"QRコードスキャン"}),(0,r.jsx)("button",{onClick:()=>U(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(M.Z,{className:"h-5 w-5"})})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(y.Z,{onScan:e=>es(e.data),onError:e=>console.error(e),onClose:()=>U(!1),isActive:R})}),(0,r.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"会員のQRコードをスキャンしてください"})]})}),L&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"NFCタッチ"}),(0,r.jsx)("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(M.Z,{className:"h-5 w-5"})})]}),(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"animate-pulse",children:(0,r.jsx)(N.Z,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"NFCカードをタッチしてください"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"カードまたはスマートフォンを端末にかざしてください"})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4 mt-6",children:[(0,r.jsx)("button",{onClick:()=>es("mock-nfc-data"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"テスト実行"}),(0,r.jsx)("button",{onClick:()=>G(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"})]})]})})]})}}},function(e){e.O(0,[7066,3401,255,1047,9774,2888,179],function(){return e(e.s=4642)}),_N_E=e.O()}]);