(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4871],{4297:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var a=t(7294),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,s)=>{let t=(0,a.forwardRef)(({color:t="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:x,...o},m)=>(0,a.createElement)("svg",{ref:m,...l,width:i,height:i,stroke:t,strokeWidth:c?24*Number(n)/Number(i):n,className:["lucide",`lucide-${r(e)}`,d].join(" "),...o},[...s.map(([e,s])=>(0,a.createElement)(e,s)),...Array.isArray(x)?x:[x]]));return t.displayName=`${e}`,t}},5077:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1981:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},7420:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},5283:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},4976:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5097:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},1012:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},7307:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},9560:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},4933:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1352:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(4297).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9581:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/social/reviews",function(){return t(6731)}])},6731:function(e,s,t){"use strict";t.r(s);var a=t(5893),l=t(7294),r=t(1163),i=t(255),n=t(9560),c=t(4976),d=t(5077),x=t(7420),o=t(5097),m=t(7307),u=t(1012),h=t(4933),g=t(1981),p=t(1352),y=t(5283);s.default=()=>{let e=(0,r.useRouter)(),[s,t]=(0,l.useState)(null),[v,j]=(0,l.useState)("feed"),[f,b]=(0,l.useState)([]),[N,w]=(0,l.useState)([]),[k,Z]=(0,l.useState)(!1),[D,C]=(0,l.useState)(null),[_,L]=(0,l.useState)("all"),[S,A]=(0,l.useState)("latest"),[I,E]=(0,l.useState)({storeId:0,rating:0,title:"",content:"",images:[],visitDate:"",tags:[]});(0,l.useEffect)(()=>{if(!i.ON.isAuthenticated()){e.push("/login");return}t(i.ON.getUser()),M(),F()},[e]);let M=()=>{b([{id:1,user:{id:1,username:"yuki_tanaka",avatar:"\uD83D\uDC69‍\uD83D\uDCBC",level:3},store:{id:1,name:"オーガニック カフェ リーフ",category:"レストラン・飲食店",address:"東京都世田谷区三軒茶屋1-2-3"},rating:5,title:"素晴らしいオーガニック体験！",content:"友達と一緒に行きました。オーガニック食材を使った料理は本当に美味しくて、体にも優しい感じがします。スタッフの方も親切で、居心地の良い空間でした。また必ず行きたいと思います！",images:["https://images.unsplash.com/photo-1551024506-0bccd828d307?w=400","https://images.unsplash.com/photo-1551024601-bec78aea704b?w=400"],visitDate:"2024-01-15",createdAt:"2024-01-16",likes:12,comments:3,isLiked:!1,tags:["オーガニック","健康的","友達と"]},{id:2,user:{id:2,username:"mama_foodie",avatar:"\uD83D\uDC69‍\uD83C\uDF73",level:5},store:{id:2,name:"ファミリー レストラン",category:"レストラン・飲食店",address:"東京都世田谷区下北沢2-4-5"},rating:4,title:"子連れに優しいレストラン",content:"子供用の設備が充実していて、家族で安心して食事できました。キッズメニューも豊富で、子供たちも大満足でした。",images:["https://images.unsplash.com/photo-1544025162-d76694265947?w=400"],visitDate:"2024-01-14",createdAt:"2024-01-14",likes:8,comments:2,isLiked:!0,tags:["子連れ","ファミリー","キッズメニュー"]}])},F=()=>{w([{id:3,user:{id:999,username:(null==s?void 0:s.username)||"current_user",avatar:"\uD83D\uDC64",level:2},store:{id:3,name:"テック カフェ",category:"レストラン・飲食店",address:"東京都渋谷区恵比寿1-1-1"},rating:4,title:"Wi-Fi環境が最高！",content:"仕事でよく利用させていただいています。Wi-Fi環境が安定していて、電源も豊富なので長時間作業に集中できます。",images:[],visitDate:"2024-01-13",createdAt:"2024-01-13",likes:5,comments:1,isLiked:!1,tags:["仕事","Wi-Fi","作業環境"]}])},O=e=>{b(s=>s.map(s=>s.id===e?{...s,isLiked:!s.isLiked,likes:s.isLiked?s.likes-1:s.likes+1}:s))},W=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2?arguments[2]:void 0;return(0,a.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(l=>(0,a.jsx)("button",{onClick:()=>s&&t&&t(l),disabled:!s,className:"".concat(s?"hover:scale-110":""," transition-transform"),children:(0,a.jsx)(n.Z,{className:"h-4 w-4 ".concat(l<=e?"text-yellow-400 fill-current":"text-gray-300")})},l))})},P=e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 hover:shadow-md transition-shadow",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center text-lg",children:e.user.avatar}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:e.user.username}),(0,a.jsxs)("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-600 rounded-full",children:["Lv.",e.user.level]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.store.name}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)(d.Z,{className:"h-3 w-3"}),(0,a.jsx)("span",{children:e.createdAt})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[W(e.rating),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["(",e.rating,".0)"]})]}),(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:e.content})]}),e.images.length>0&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:e.images.map((e,s)=>(0,a.jsx)("img",{src:e,alt:"レビュー画像 ".concat(s+1),className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"},s))})}),e.tags.length>0&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags.map(e=>(0,a.jsxs)("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-600 rounded-full",children:["#",e]},e))})}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>O(e.id),className:"flex items-center space-x-2 px-3 py-1 rounded-lg transition-colors ".concat(e.isLiked?"bg-red-50 text-red-600":"bg-gray-50 text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 ".concat(e.isLiked?"fill-current":"")}),(0,a.jsx)("span",{className:"text-sm",children:e.likes})]}),(0,a.jsxs)("button",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:e.comments})]})]}),(0,a.jsxs)("button",{className:"flex items-center space-x-2 px-3 py-1 bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"シェア"})]})]})]},e.id);return s?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(n.Z,{className:"h-8 w-8 text-yellow-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"レビュー"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"店舗の体験を共有しよう"})]})]}),(0,a.jsxs)("button",{onClick:()=>Z(!0),className:"flex items-center space-x-2 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"レビューを書く"})]})]})})}),(0,a.jsx)("div",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,a.jsx)("nav",{className:"flex space-x-8",children:[{key:"feed",label:"フィード",icon:n.Z},{key:"myReviews",label:"マイレビュー",icon:h.Z,count:N.length}].map(e=>{let{key:s,label:t,icon:l,count:r}=e;return(0,a.jsxs)("button",{onClick:()=>j(s),className:"flex items-center space-x-2 py-4 px-2 border-b-2 font-medium text-sm ".concat(v===s?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,a.jsx)(l,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:t}),void 0!==r&&(0,a.jsx)("span",{className:"ml-1 px-2 py-0.5 text-xs bg-gray-100 text-gray-600 rounded-full",children:r})]},s)})})})}),(0,a.jsx)("div",{className:"bg-white shadow-sm",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-3",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-gray-500"}),(0,a.jsxs)("select",{value:_,onChange:e=>L(e.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-1",children:[(0,a.jsx)("option",{value:"all",children:"すべてのカテゴリ"}),(0,a.jsx)("option",{value:"restaurant",children:"レストラン・飲食店"}),(0,a.jsx)("option",{value:"retail",children:"小売・ショッピング"}),(0,a.jsx)("option",{value:"service",children:"サービス・美容"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"並び順:"}),(0,a.jsxs)("select",{value:S,onChange:e=>A(e.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-1",children:[(0,a.jsx)("option",{value:"latest",children:"最新順"}),(0,a.jsx)("option",{value:"rating",children:"評価順"}),(0,a.jsx)("option",{value:"likes",children:"いいね順"})]})]})]})})})}),(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:["feed"===v&&f.map(P),"myReviews"===v&&N.map(P)]})}),k&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsx)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"レビューを書く"}),(0,a.jsx)("button",{onClick:()=>Z(!1),className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(p.Z,{className:"h-6 w-6"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"店舗"}),(0,a.jsxs)("select",{value:I.storeId,onChange:e=>E({...I,storeId:parseInt(e.target.value)}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[(0,a.jsx)("option",{value:0,children:"店舗を選択してください"}),(0,a.jsx)("option",{value:1,children:"オーガニック カフェ リーフ"}),(0,a.jsx)("option",{value:2,children:"ファミリー レストラン"}),(0,a.jsx)("option",{value:3,children:"テック カフェ"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"評価"}),W(I.rating,!0,e=>E({...I,rating:e}))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"タイトル"}),(0,a.jsx)("input",{type:"text",value:I.title,onChange:e=>E({...I,title:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"レビューのタイトルを入力"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"内容"}),(0,a.jsx)("textarea",{value:I.content,onChange:e=>E({...I,content:e.target.value}),rows:4,className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"体験した内容を詳しく教えてください"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"訪問日"}),(0,a.jsx)("input",{type:"date",value:I.visitDate,onChange:e=>E({...I,visitDate:e.target.value}),className:"border border-gray-300 rounded-lg px-3 py-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"写真"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("button",{className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,a.jsx)(y.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"写真を追加"})]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"最大5枚まで"})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 mt-6 pt-6 border-t",children:[(0,a.jsx)("button",{onClick:()=>Z(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"キャンセル"}),(0,a.jsx)("button",{onClick:()=>{if(!I.storeId||!I.rating||!I.title||!I.content){alert("必要な項目を入力してください");return}let e={id:Date.now(),user:{id:(null==s?void 0:s.id)||999,username:(null==s?void 0:s.username)||"current_user",avatar:"\uD83D\uDC64",level:2},store:D||{id:I.storeId,name:"New Store",category:"レストラン・飲食店",address:"住所未設定"},rating:I.rating,title:I.title,content:I.content,images:I.images,visitDate:I.visitDate,createdAt:new Date().toISOString().split("T")[0],likes:0,comments:0,isLiked:!1,tags:I.tags};w(s=>[e,...s]),b(s=>[e,...s]),Z(!1),E({storeId:0,rating:0,title:"",content:"",images:[],visitDate:"",tags:[]}),C(null),alert("レビューを投稿しました！")},className:"px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600",children:"投稿する"})]})]})})})]}):(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"読み込み中..."})}},1163:function(e,s,t){e.exports=t(2937)}},function(e){e.O(0,[7066,255,9774,2888,179],function(){return e(e.s=9581)}),_N_E=e.O()}]);